<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexMind STEM Learning Command Center</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d1b69 100%);
            min-height: 100vh;
            color: #e0e6ed;
            overflow-x: hidden;
            position: relative;
        }

        .sacred-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        .hex-pattern {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 2px solid #4a90e2;
            transform: rotate(30deg);
            animation: float 6s ease-in-out infinite;
        }

        .hex-pattern:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .hex-pattern:nth-child(2) { top: 20%; right: 15%; animation-delay: 2s; }
        .hex-pattern:nth-child(3) { bottom: 30%; left: 20%; animation-delay: 4s; }
        .hex-pattern:nth-child(4) { bottom: 15%; right: 10%; animation-delay: 1s; }

        @keyframes float {
            0%, 100% { transform: rotate(30deg) translateY(0px); }
            50% { transform: rotate(30deg) translateY(-20px); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(45deg, #4a90e2, #50c878, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(74, 144, 226, 0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #b8c5d1;
            margin-bottom: 20px;
        }

        .stem-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stem-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .science { background: linear-gradient(45deg, #ff6b6b, #ff8e53); }
        .technology { background: linear-gradient(45deg, #4ecdc4, #44a08d); }
        .engineering { background: linear-gradient(45deg, #45b7d1, #96c93d); }
        .mathematics { background: linear-gradient(45deg, #f093fb, #f5576c); }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .card h3 {
            color: #4a90e2;
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .learning-objectives {
            grid-column: 1 / -1;
        }

        .objective-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .objective-item {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4a90e2;
            position: relative;
        }

        .objective-item.completed {
            border-left-color: #50c878;
            background: rgba(80, 200, 120, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a90e2, #50c878);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .ai-models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .ai-model {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .ai-model:hover {
            border-color: #4a90e2;
            transform: translateY(-3px);
        }

        .ai-model.selected {
            border-color: #50c878;
            background: rgba(80, 200, 120, 0.1);
        }

        .ai-model h4 {
            margin-bottom: 5px;
            color: #4a90e2;
        }

        .ai-model p {
            font-size: 0.9rem;
            color: #b8c5d1;
        }

        .stem-focus-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .focus-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #e0e6ed;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .focus-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .focus-btn.active {
            background: linear-gradient(45deg, #4a90e2, #50c878);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a90e2;
            font-weight: bold;
        }

        .input-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #e0e6ed;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .challenge-level {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .level-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: #e0e6ed;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .level-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #4a90e2, #50c878);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .analysis-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #4a90e2;
        }

        .analysis-item {
            margin-bottom: 15px;
        }

        .analysis-item strong {
            color: #4a90e2;
        }

        .prompt-output {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #4a90e2, #50c878);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .learning-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #4a90e2;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #b8c5d1;
            margin-top: 5px;
        }

        .architect-mode {
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), rgba(80, 200, 120, 0.1));
            border-radius: 12px;
            border: 2px solid rgba(74, 144, 226, 0.3);
        }

        .architect-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .architect-btn {
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #e0e6ed;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-align: center;
        }

        .architect-btn:hover {
            border-color: #4a90e2;
            background: rgba(74, 144, 226, 0.1);
            transform: translateY(-2px);
        }

        .architect-btn.active {
            border-color: #50c878;
            background: linear-gradient(45deg, rgba(74, 144, 226, 0.3), rgba(80, 200, 120, 0.3));
        }

        .power-templates {
            grid-column: 1 / -1;
            margin-top: 20px;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .template-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4a90e2;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .template-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .template-title {
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 8px;
        }

        .template-desc {
            font-size: 0.9rem;
            color: #b8c5d1;
            line-height: 1.4;
        }

        .session-manager {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .session-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .session-indicator {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .session-green { background: rgba(80, 200, 120, 0.3); color: #50c878; }
        .session-yellow { background: rgba(255, 215, 0, 0.3); color: #ffd700; }
        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .ai-models-grid {
                grid-template-columns: 1fr;
            }
            
            .stem-focus-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .architect-options {
                grid-template-columns: 1fr;
            }
            
            .template-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .ai-models-grid {
                grid-template-columns: 1fr;
            }
            
            .stem-focus-selector {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="sacred-background">
        <div class="hex-pattern"></div>
        <div class="hex-pattern"></div>
        <div class="hex-pattern"></div>
        <div class="hex-pattern"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🧠 HexMind STEM Learning Hub</h1>
            <p class="subtitle">AI-Powered Learning Orchestrator for Science, Technology, Engineering & Mathematics</p>
            <div class="stem-badges">
                <span class="stem-badge science">🔬 Science</span>
                <span class="stem-badge technology">💻 Technology</span>
                <span class="stem-badge engineering">⚙️ Engineering</span>
                <span class="stem-badge mathematics">📐 Mathematics</span>
            </div>
        </div>

        <div class="learning-stats">
            <div class="stat-card">
                <div class="stat-number" id="totalChallenges">0</div>
                <div class="stat-label">Challenges Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="skillPoints">0</div>
                <div class="stat-label">Skill Points</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentLevel">1</div>
                <div class="stat-label">Learning Level</div>
            </div>
        </div>

        <div class="card learning-objectives">
            <h3>🎯 Learning Objectives & Progress</h3>
            <div class="objective-grid">
                <div class="objective-item" data-objective="fundamentals">
                    <strong>🔬 Scientific Method Mastery</strong>
                    <p>Hypothesis formation, experimental design, data analysis</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>0% Complete</small>
                </div>
                <div class="objective-item" data-objective="programming">
                    <strong>💻 Programming Foundations</strong>
                    <p>Logic, algorithms, debugging, problem decomposition</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>0% Complete</small>
                </div>
                <div class="objective-item" data-objective="engineering">
                    <strong>⚙️ Engineering Design Process</strong>
                    <p>Problem identification, prototyping, testing, iteration</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>0% Complete</small>
                </div>
                <div class="objective-item" data-objective="mathematics">
                    <strong>📐 Mathematical Reasoning</strong>
                    <p>Pattern recognition, logical proofs, quantitative analysis</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>0% Complete</small>
                </div>
            </div>
        </div>

        <div class="main-grid">
            <div class="card">
                <h3>🤖 AI Learning Partners</h3>
                <div class="ai-models-grid">
                    <div class="ai-model" data-model="claude">
                        <h4>Claude</h4>
                        <p>Deep Analysis & Reasoning</p>
                    </div>
                    <div class="ai-model" data-model="perplexity">
                        <h4>Perplexity</h4>
                        <p>Research & Current Data</p>
                    </div>
                    <div class="ai-model" data-model="gemini">
                        <h4>Gemini</h4>
                        <p>Multimodal Learning</p>
                    </div>
                    <div class="ai-model" data-model="grok">
                        <h4>Grok</h4>
                        <p>Creative Problem Solving</p>
                    </div>
                    <div class="ai-model" data-model="chatgpt">
                        <h4>ChatGPT</h4>
                        <p>Interactive Tutoring</p>
                    </div>
                    <div class="ai-model" data-model="copilot">
                        <h4>GitHub Copilot</h4>
                        <p>Code & Technical Skills</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>🎯 STEM Focus Area</h3>
                <div class="stem-focus-selector">
                    <button class="focus-btn" data-focus="science">🔬 Science</button>
                    <button class="focus-btn" data-focus="technology">💻 Technology</button>
                    <button class="focus-btn" data-focus="engineering">⚙️ Engineering</button>
                    <button class="focus-btn" data-focus="mathematics">📐 Mathematics</button>
                </div>

                <h4 style="margin: 20px 0 10px 0; color: #4a90e2;">Challenge Difficulty</h4>
                <div class="challenge-level">
                    <button class="level-btn" data-level="beginner">🌱 Beginner</button>
                    <button class="level-btn" data-level="intermediate">🚀 Intermediate</button>
                    <button class="level-btn" data-level="advanced">🔥 Advanced</button>
                    <button class="level-btn" data-level="expert">💎 Expert</button>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>💡 Learning Challenge Input</h3>
            <div class="input-group">
                <label for="challengeInput">Describe your STEM learning goal or challenge:</label>
                <textarea id="challengeInput" placeholder="Example: I want to understand how neural networks learn patterns in data, or help me design a bridge that can support 1000kg using only paper and tape..."></textarea>
            </div>
            
            <div class="architect-mode">
                <h4 style="color: #4a90e2; margin: 15px 0 10px 0;">🏗️ Architect Mode (Claude Opus 4 Power)</h4>
                <div class="architect-options">
                    <button class="architect-btn" data-mode="architecture">🏛️ System Architecture</button>
                    <button class="architect-btn" data-mode="integration">🔗 Cross-System Integration</button>
                    <button class="architect-btn" data-mode="fullstack">💻 Full Feature Implementation</button>
                    <button class="architect-btn" data-mode="debug">🔍 Deep Analysis & Debug</button>
                </div>
            </div>
            
            <button class="btn" id="generateLearningPlan">🧠 Generate AI Learning Plan</button>
        </div>

        <div class="card power-templates">
            <h3>🚀 Claude Opus 4 Power Templates</h3>
            <div class="session-manager">
                <div class="session-stats">
                    <span>Session Messages: <span id="sessionCount">0</span>/40</span>
                    <span class="session-indicator session-green" id="sessionStatus">Fresh Session</span>
                    <button class="btn" id="newChatTemplate" style="padding: 5px 15px; font-size: 0.8rem;">📋 Generate New Chat Template</button>
                </div>
            </div>
            
            <div class="template-grid">
                <div class="template-card" data-template="architecture">
                    <div class="template-title">🏛️ Deep Architectural Reasoning</div>
                    <div class="template-desc">Complete system architecture with diagrams, rationale, alternatives, and failure modes</div>
                </div>
                <div class="template-card" data-template="integration">
                    <div class="template-title">🔗 Cross-System Integration</div>
                    <div class="template-desc">Integration layers with loose coupling, error handling, and rollback capability</div>
                </div>
                <div class="template-card" data-template="fullstack">
                    <div class="template-title">💻 Full Feature Implementation</div>
                    <div class="template-desc">Complete frontend + backend + tests + accessibility in one response</div>
                </div>
                <div class="template-card" data-template="debug">
                    <div class="template-title">🔍 Deep Code Analysis</div>
                    <div class="template-desc">Performance, security, accessibility, and ADHD-friendly improvements</div>
                </div>
                <div class="template-card" data-template="multi-approach">
                    <div class="template-title">🎯 Multiple Solution Approaches</div>
                    <div class="template-desc">MVP, scalable, and over-engineered solutions with trade-off analysis</div>
                </div>
                <div class="template-card" data-template="team-prompts">
                    <div class="template-title">🤖 AI Team Coordination</div>
                    <div class="template-desc">Optimized prompts for each AI partner to maximize their strengths</div>
                </div>
            </div>
        </div>
            <h3>🔍 Learning Analysis</h3>
            <div class="analysis-panel" id="analysisResults"></div>
        </div>

        <div class="card hidden" id="promptPanel">
            <h3>🚀 Optimized AI Prompt</h3>
            <p>Copy this enhanced prompt to your selected AI partner:</p>
            <div class="prompt-output" id="promptOutput"></div>
            <button class="btn" id="copyPrompt">📋 Copy Prompt</button>
        </div>

        <div class="card hidden" id="responsePanel">
            <h3>📊 AI Response Processor</h3>
            <div class="input-group">
                <label for="aiResponse">Paste AI response here for processing:</label>
                <textarea id="aiResponse" placeholder="Paste the AI's response here for intelligent chunking and formatting..."></textarea>
            </div>
            <button class="btn" id="processResponse">⚡ Process & Format</button>
            <div class="hidden" id="processedResults">
                <h4>📋 Processed Results</h4>
                <div id="processedContent"></div>
                <button class="btn" id="markComplete">✅ Mark Challenge Complete</button>
            </div>
        </div>
    </div>

    <script>
        // Enhanced application state with architect mode
        let appState = {
            selectedModel: null,
            selectedFocus: null,
            selectedLevel: null,
            selectedArchitectMode: null,
            sessionMessages: 0,
            userStats: {
                totalChallenges: 0,
                currentStreak: 0,
                skillPoints: 0,
                currentLevel: 1
            },
            learningObjectives: {
                fundamentals: 0,
                programming: 0,
                engineering: 0,
                mathematics: 0
            }
        };

        // Power template library
        const powerTemplates = {
            architecture: {
                title: "🏛️ Deep Architectural Reasoning",
                template: `Design a complete system architecture for {TOPIC} that:
- Handles {EDGE_CASES}
- Scales from 1 to 1M users  
- Integrates with existing systems
- Maintains performance constraints
- Supports ADHD-friendly learning patterns

Provide:
1. Architecture diagram in Mermaid
2. Key decision rationale
3. Alternative approaches considered
4. Failure modes and mitigations
5. Implementation roadmap

Context: This is for a {FOCUS} learning system at {LEVEL} level.
Learning goal: {INTENT}
Time constraint: {TIME} minutes

Make it production-ready and maintainable.`
            },
            integration: {
                title: "🔗 Cross-System Integration Mastery",
                template: `Create an integration solution for {TOPIC} that connects:
- Learning management system
- Progress tracking
- AI orchestration
- Content delivery
- User experience

Requirements:
- Maintains loose coupling
- Handles all edge cases
- Provides rollback capability
- Includes comprehensive error handling
- Supports real-time updates
- Works offline

Show complete implementation with:
1. Integration layer code
2. API specifications
3. Error boundary patterns
4. State synchronization
5. Testing strategy

Focus: {FOCUS} | Level: {LEVEL} | Intent: {INTENT}`
            },
            fullstack: {
                title: "💻 Complete Feature Implementation",
                template: `Create a complete {TOPIC} feature with:

Frontend (React + TypeScript):
- Component implementation
- State management
- Error boundaries
- Loading states
- Accessibility (ARIA)
- ADHD-friendly design

Backend:
- API endpoints
- Data validation
- Security measures
- Performance optimization

Testing:
- Unit tests
- Integration tests
- E2E scenarios

Context: {FOCUS} learning system, {LEVEL} difficulty
Learning goal: {INTENT}
Time budget: {TIME} minutes

Provide everything as working code with proper TypeScript types.`
            },
            debug: {
                title: "🔍 Deep Analysis & Debug",
                template: `Analyze {TOPIC} for:

Performance Issues:
- Bottlenecks identification
- Optimization strategies
- Profiling recommendations

Security Vulnerabilities:
- Common attack vectors
- Input validation gaps
- Authentication/authorization flaws

Accessibility Problems:
- ARIA compliance
- Keyboard navigation
- Screen reader compatibility

ADHD-Friendly Improvements:
- Attention management
- Cognitive load reduction
- Dopamine trigger optimization

Code Quality:
- SOLID principles adherence
- DRY/KISS/YAGNI violations
- Potential race conditions

Context: {FOCUS} system, {LEVEL} complexity
Goal: {INTENT}

Provide specific fixes with implementation examples.`
            },
            "multi-approach": {
                title: "🎯 Multiple Solution Approaches",
                template: `Create 3 different approaches for {TOPIC}:

1. Quick & Dirty (MVP):
   - Minimal viable implementation
   - 24-48 hour timeline
   - Basic functionality only

2. Scalable (Production-Ready):
   - Robust architecture
   - 1-2 week timeline
   - Full feature set

3. Over-Engineered (Future-Proof):
   - Enterprise-grade solution
   - 1-2 month timeline
   - Extensible framework

For each approach, provide:
- Architecture overview
- Key implementation details
- Trade-offs analysis
- Resource requirements
- Risk assessment

Context: {FOCUS} learning, {LEVEL} difficulty, {INTENT} goal
Recommend the best approach and explain why.`
            },
            "team-prompts": {
                title: "🤖 AI Team Coordination",
                template: `Create optimized prompts for the AI team to handle {TOPIC}:

For Grok (Creative Problem Solving):
[Prompt optimized for Grok's strengths in creative and unconventional approaches]

For Gemini (Multimodal Analysis):
[Prompt leveraging Gemini's visual and cross-modal capabilities]

For Perplexity (Research & Data):
[Prompt for comprehensive research and current information]

For ChatGPT (Interactive Tutoring):
[Prompt for step-by-step interactive learning]

For GitHub Copilot (Code Implementation):
[Prompt for efficient code generation and debugging]

Context: {FOCUS} learning system, {LEVEL} difficulty
Goal: {INTENT}
Time: {TIME} minutes

Each prompt should maximize that AI's unique strengths while maintaining consistency across the team.`
            }
        };

        // STEM-specific prompt templates
        const stemPrompts = {
            science: {
                beginner: "Act as a patient science teacher. Help me understand {TOPIC} using simple explanations, real-world examples, and step-by-step reasoning. Include hands-on activities I can try.",
                intermediate: "As a science mentor, guide me through {TOPIC} with detailed explanations, scientific methodology, and connections to other concepts. Suggest experiments or observations.",
                advanced: "As a research scientist, help me deeply understand {TOPIC} including current research, methodologies, and implications. Challenge my thinking with complex scenarios.",
                expert: "As a subject matter expert, engage me in {TOPIC} at a research level with cutting-edge insights, peer review perspectives, and novel approaches."
            },
            technology: {
                beginner: "Act as a friendly tech guide. Explain {TOPIC} in simple terms with practical examples and hands-on projects I can build to learn.",
                intermediate: "As a software engineer mentor, help me understand {TOPIC} with code examples, best practices, and real-world applications. Include debugging approaches.",
                advanced: "As a senior tech lead, guide me through {TOPIC} including architecture decisions, scalability considerations, and advanced implementation patterns.",
                expert: "As a technology innovator, explore {TOPIC} at the cutting edge with emerging trends, research implications, and novel solutions."
            },
            engineering: {
                beginner: "Act as an engineering teacher. Help me understand {TOPIC} with clear explanations, visual aids, and simple design challenges I can attempt.",
                intermediate: "As an engineering mentor, guide me through {TOPIC} including design principles, problem-solving methodologies, and practical applications.",
                advanced: "As a professional engineer, help me master {TOPIC} with complex design challenges, optimization techniques, and industry standards.",
                expert: "As an engineering innovator, explore {TOPIC} at the research frontier with novel approaches, cutting-edge materials, and revolutionary design concepts."
            },
            mathematics: {
                beginner: "Act as a patient math tutor. Explain {TOPIC} step-by-step with visual examples, real-world applications, and practice problems.",
                intermediate: "As a mathematics mentor, guide me through {TOPIC} with detailed proofs, connections to other areas, and challenging problem sets.",
                advanced: "As a mathematics professor, help me master {TOPIC} including advanced theorems, rigorous proofs, and research-level insights.",
                expert: "As a research mathematician, explore {TOPIC} at the frontier with novel approaches, open problems, and cutting-edge applications."
            }
        };

        // Initialize application
        function initializeApp() {
            loadUserStats();
            updateStatsDisplay();
            updateObjectivesDisplay();
            setupEventListeners();
            showToast("🚀 HexMind STEM Learning Hub Activated!");
        }

        // Event listeners setup
        function setupEventListeners() {
            // AI Model selection
            document.querySelectorAll('.ai-model').forEach(model => {
                model.addEventListener('click', () => selectAIModel(model.dataset.model));
            });

            // STEM focus selection
            document.querySelectorAll('.focus-btn').forEach(btn => {
                btn.addEventListener('click', () => selectFocus(btn.dataset.focus));
            });

            // Challenge level selection
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.addEventListener('click', () => selectLevel(btn.dataset.level));
            });

            // Architect mode selection
            document.querySelectorAll('.architect-btn').forEach(btn => {
                btn.addEventListener('click', () => selectArchitectMode(btn.dataset.mode));
            });

            // Power template selection
            document.querySelectorAll('.template-card').forEach(card => {
                card.addEventListener('click', () => applyPowerTemplate(card.dataset.template));
            });

            // Generate learning plan
            document.getElementById('generateLearningPlan').addEventListener('click', generateLearningPlan);

            // New chat template
            document.getElementById('newChatTemplate').addEventListener('click', generateNewChatTemplate);

            // Copy prompt
            document.getElementById('copyPrompt').addEventListener('click', copyPrompt);

            // Process response
            document.getElementById('processResponse').addEventListener('click', processAIResponse);

            // Mark complete
            document.getElementById('markComplete').addEventListener('click', markChallengeComplete);

            // Track session messages
            trackSessionActivity();
        }

        // AI Model selection
        function selectAIModel(model) {
            document.querySelectorAll('.ai-model').forEach(m => m.classList.remove('selected'));
            document.querySelector(`[data-model="${model}"]`).classList.add('selected');
            appState.selectedModel = model;
            showToast(`🤖 ${model.charAt(0).toUpperCase() + model.slice(1)} selected as AI partner!`);
        }

        // Architect mode selection
        function selectArchitectMode(mode) {
            document.querySelectorAll('.architect-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            appState.selectedArchitectMode = mode;
            showToast(`🏗️ ${mode.charAt(0).toUpperCase() + mode.slice(1)} architect mode activated!`);
        }

        // Apply power template
        function applyPowerTemplate(templateKey) {
            const template = powerTemplates[templateKey];
            if (!template) return;

            // Visual feedback
            document.querySelectorAll('.template-card').forEach(card => card.style.borderLeft = '4px solid #4a90e2');
            document.querySelector(`[data-template="${templateKey}"]`).style.borderLeft = '4px solid #50c878';

            showToast(`🚀 ${template.title} template loaded!`);
            
            // Auto-fill some context if we have a challenge
            const challenge = document.getElementById('challengeInput').value.trim();
            if (challenge) {
                setTimeout(() => {
                    showToast(`💡 Template ready! Generate your enhanced prompt now.`);
                }, 1000);
            }
        }

        // Generate new chat template
        function generateNewChatTemplate() {
            const challenge = document.getElementById('challengeInput').value.trim();
            const completedChallenges = appState.userStats.totalChallenges;
            const currentLevel = appState.userStats.currentLevel;
            const sessionCount = appState.sessionMessages;

            const template = `## 🧠 HexMind Session Transfer
**Project:** STEM Learning System Enhancement
**Session:** #${Math.floor(sessionCount / 40) + 1}
**Progress:** Level ${currentLevel}, ${completedChallenges} challenges completed

### 🎯 Current Context:
${appState.selectedFocus ? `- Focus: ${appState.selectedFocus.charAt(0).toUpperCase() + appState.selectedFocus.slice(1)}` : '- Focus: Not selected'}
${appState.selectedLevel ? `- Level: ${appState.selectedLevel.charAt(0).toUpperCase() + appState.selectedLevel.slice(1)}` : '- Level: Not selected'}
${appState.selectedModel ? `- AI Partner: ${appState.selectedModel.charAt(0).toUpperCase() + appState.selectedModel.slice(1)}` : '- AI Partner: Not selected'}
${appState.selectedArchitectMode ? `- Architect Mode: ${appState.selectedArchitectMode}` : '- Architect Mode: Not selected'}

### 📊 Learning Objectives Progress:
- 🔬 Scientific Method: ${appState.learningObjectives.fundamentals}%
- 💻 Programming: ${appState.learningObjectives.programming}%
- ⚙️ Engineering: ${appState.learningObjectives.engineering}%
- 📐 Mathematics: ${appState.learningObjectives.mathematics}%

### 🚀 Current Challenge:
${challenge || 'No active challenge - ready for new learning goal'}

### 🎯 Need From You:
[Specify what you need - architecture, implementation, analysis, etc.]

### 📋 Architecture Decisions Made:
- [List any important decisions from this session]

**Ready for Claude Opus 4 maximum leverage!** 🔥`;

            // Copy to clipboard
            navigator.clipboard.writeText(template).then(() => {
                showToast("📋 New chat template copied! Paste in fresh chat for context transfer.", "success");
            }).catch(() => {
                // Fallback - show in modal or new window
                const newWindow = window.open('', '_blank');
                newWindow.document.write(`<pre style="padding: 20px; font-family: monospace; line-height: 1.5;">${template}</pre>`);
                showToast("📋 Template opened in new window - copy from there!", "success");
            });
        }

        // Track session activity
        function trackSessionActivity() {
            // Increment message count on certain actions
            const activityTriggers = ['generateLearningPlan', 'processResponse', 'markComplete'];
            
            activityTriggers.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('click', () => {
                        appState.sessionMessages++;
                        updateSessionStatus();
                    });
                }
            });
        }

        // Update session status indicator
        function updateSessionStatus() {
            const count = appState.sessionMessages;
            const countElement = document.getElementById('sessionCount');
            const statusElement = document.getElementById('sessionStatus');
            
            countElement.textContent = count;
            
            if (count < 25) {
                statusElement.textContent = 'Fresh Session';
                statusElement.className = 'session-indicator session-green';
            } else if (count < 35) {
                statusElement.textContent = 'Getting Full';
                statusElement.className = 'session-indicator session-yellow';
            } else {
                statusElement.textContent = 'Consider New Chat';
                statusElement.className = 'session-indicator session-red';
            }
        }

        // Challenge level selection
        function selectLevel(level) {
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-level="${level}"]`).classList.add('active');
            appState.selectedLevel = level;
            showToast(`🔥 ${level.charAt(0).toUpperCase() + level.slice(1)} challenge level set!`);
        }

        // Generate learning plan
        function generateLearningPlan() {
            const challenge = document.getElementById('challengeInput').value.trim();
            
            if (!challenge) {
                showToast("⚠️ Please enter a learning challenge first!", "error");
                return;
            }

            if (!appState.selectedModel || !appState.selectedFocus || !appState.selectedLevel) {
                showToast("⚠️ Please select AI partner, STEM focus, and difficulty level!", "error");
                return;
            }

            // Analyze the challenge
            const analysis = analyzeLearningChallenge(challenge);
            displayAnalysis(analysis);

            // Generate optimized prompt
            const prompt = generateOptimizedPrompt(challenge, analysis);
            displayPrompt(prompt);

            showToast("🧠 Learning plan generated successfully!");
        }

        // Analyze learning challenge
        function analyzeLearningChallenge(challenge) {
            const words = challenge.toLowerCase().split(' ');
            
            // Complexity assessment
            const complexityIndicators = {
                simple: ['basic', 'simple', 'introduction', 'beginner', 'start', 'learn'],
                moderate: ['understand', 'explain', 'analyze', 'compare', 'design'],
                complex: ['optimize', 'research', 'develop', 'create', 'innovate', 'advanced']
            };

            let complexity = { simple: 0, moderate: 0, complex: 0 };
            words.forEach(word => {
                if (complexityIndicators.simple.includes(word)) complexity.simple++;
                if (complexityIndicators.moderate.includes(word)) complexity.moderate++;
                if (complexityIndicators.complex.includes(word)) complexity.complex++;
            });

            // Key terms extraction
            const stemTerms = {
                science: ['hypothesis', 'experiment', 'data', 'theory', 'research', 'observation', 'analysis'],
                technology: ['algorithm', 'code', 'software', 'program', 'system', 'digital', 'computer'],
                engineering: ['design', 'build', 'construct', 'prototype', 'structure', 'optimize', 'solve'],
                mathematics: ['equation', 'formula', 'calculate', 'proof', 'pattern', 'logic', 'number']
            };

            let keyTerms = [];
            words.forEach(word => {
                Object.values(stemTerms).forEach(termList => {
                    if (termList.includes(word)) keyTerms.push(word);
                });
            });

            // Learning intent
            const intents = {
                understanding: ['understand', 'explain', 'learn', 'know'],
                problem_solving: ['solve', 'fix', 'debug', 'troubleshoot'],
                creation: ['build', 'create', 'design', 'develop', 'make'],
                analysis: ['analyze', 'compare', 'evaluate', 'assess']
            };

            let intent = 'exploration';
            Object.entries(intents).forEach(([key, intentWords]) => {
                if (intentWords.some(word => words.includes(word))) {
                    intent = key;
                }
            });

            return {
                complexity,
                keyTerms: [...new Set(keyTerms)],
                intent,
                focus: appState.selectedFocus,
                level: appState.selectedLevel,
                estimatedTime: calculateEstimatedTime(complexity, appState.selectedLevel)
            };
        }

        // Calculate estimated learning time
        function calculateEstimatedTime(complexity, level) {
            const baseTime = {
                beginner: 30,
                intermediate: 60,
                advanced: 90,
                expert: 120
            };

            const complexityMultiplier = (complexity.complex * 1.5 + complexity.moderate * 1.2 + complexity.simple * 0.8) || 1;
            return Math.round(baseTime[level] * complexityMultiplier);
        }

        // Display analysis results
        function displayAnalysis(analysis) {
            const complexityTotal = analysis.complexity.simple + analysis.complexity.moderate + analysis.complexity.complex || 1;
            const simplePercent = Math.round((analysis.complexity.simple / complexityTotal) * 100);
            const moderatePercent = Math.round((analysis.complexity.moderate / complexityTotal) * 100);
            const complexPercent = Math.round((analysis.complexity.complex / complexityTotal) * 100);

            const analysisHTML = `
                <div class="analysis-item">
                    <strong>🎯 Learning Focus:</strong> ${analysis.focus.charAt(0).toUpperCase() + analysis.focus.slice(1)}
                </div>
                <div class="analysis-item">
                    <strong>📊 Complexity Assessment:</strong> 
                    Simple: ${simplePercent}% | Moderate: ${moderatePercent}% | Complex: ${complexPercent}%
                </div>
                <div class="analysis-item">
                    <strong>🔑 Key Concepts:</strong> ${analysis.keyTerms.length > 0 ? analysis.keyTerms.join(', ') : 'General exploration'}
                </div>
                <div class="analysis-item">
                    <strong>🎯 Learning Intent:</strong> ${analysis.intent.replace('_', ' ').charAt(0).toUpperCase() + analysis.intent.replace('_', ' ').slice(1)}
                </div>
                <div class="analysis-item">
                    <strong>⏱️ Estimated Time:</strong> ${analysis.estimatedTime} minutes
                </div>
                <div class="analysis-item">
                    <strong>🏆 Challenge Level:</strong> ${analysis.level.charAt(0).toUpperCase() + analysis.level.slice(1)}
                </div>
            `;

            document.getElementById('analysisResults').innerHTML = analysisHTML;
            document.getElementById('analysisPanel').classList.remove('hidden');
        }

        // Generate optimized prompt with architect mode
        function generateOptimizedPrompt(challenge, analysis) {
            let basePrompt;
            
            // Use architect mode template if selected
            if (appState.selectedArchitectMode && powerTemplates[appState.selectedArchitectMode]) {
                basePrompt = powerTemplates[appState.selectedArchitectMode].template;
            } else {
                // Fall back to regular STEM prompt
                basePrompt = stemPrompts[analysis.focus][analysis.level];
            }

            // Replace template variables
            let enhancedPrompt = basePrompt
                .replace(/{TOPIC}/g, challenge)
                .replace(/{FOCUS}/g, analysis.focus)
                .replace(/{LEVEL}/g, analysis.level)
                .replace(/{INTENT}/g, analysis.intent.replace('_', ' '))
                .replace(/{TIME}/g, analysis.estimatedTime)
                .replace(/{EDGE_CASES}/g, generateEdgeCases(challenge, analysis))
                .replace(/{CONTEXT}/g, generateContext(analysis));

            // Add architect-specific enhancements
            if (appState.selectedArchitectMode) {
                enhancedPrompt += generateArchitectEnhancements(appState.selectedArchitectMode, analysis);
            }

            return enhancedPrompt;
        }

        // Generate edge cases for architect mode
        function generateEdgeCases(challenge, analysis) {
            const edgeCases = {
                science: ['Invalid data points', 'Measurement errors', 'Environmental variables', 'Sample size limitations'],
                technology: ['Network failures', 'Memory constraints', 'Concurrent users', 'API rate limits'],
                engineering: ['Material stress limits', 'Environmental conditions', 'Manufacturing tolerances', 'Safety margins'],
                mathematics: ['Division by zero', 'Infinite series', 'Numerical precision', 'Boundary conditions']
            };
            
            return edgeCases[analysis.focus]?.join(', ') || 'Error conditions, boundary cases, scalability limits';
        }

        // Generate context for architect mode
        function generateContext(analysis) {
            return `STEM Learning System - ${analysis.focus} domain, ${analysis.level} complexity, targeting ${analysis.intent} with ${analysis.estimatedTime}min time budget. User progression: Level ${appState.userStats.currentLevel}, ${appState.userStats.totalChallenges} challenges completed.`;
        }

        // Generate architect-specific enhancements
        function generateArchitectEnhancements(mode, analysis) {
            const enhancements = {
                architecture: `

🏗️ **ARCHITECT MODE ACTIVE - MAXIMUM DETAIL REQUIRED:**
- Include complete system diagrams (Mermaid format)
- Show component interactions and data flow
- Specify technology stack recommendations
- Include deployment and scaling strategies
- Document security considerations
- Provide migration paths and rollback plans`,

                integration: `

🔗 **INTEGRATION MODE ACTIVE - FOCUS ON CONNECTIONS:**
- Design loose coupling patterns
- Specify API contracts and interfaces
- Include error propagation strategies
- Show state synchronization approaches
- Document event-driven patterns
- Provide integration testing strategies`,

                fullstack: `

💻 **FULLSTACK MODE ACTIVE - COMPLETE IMPLEMENTATION:**
- Frontend: React + TypeScript with hooks
- Backend: API design with validation
- State: Redux/Zustand patterns
- Testing: Jest + React Testing Library
- Accessibility: ARIA compliance
- Performance: Optimization strategies`,

                debug: `

🔍 **DEBUG MODE ACTIVE - COMPREHENSIVE ANALYSIS:**
- Performance profiling recommendations
- Security vulnerability assessment
- Code quality metrics and improvements
- ADHD-friendly UX optimizations
- Accessibility audit results
- Specific fix implementations with examples`
            };

            return enhancements[mode] || '';
        }

        // Display generated prompt
        function displayPrompt(prompt) {
            document.getElementById('promptOutput').textContent = prompt;
            document.getElementById('promptPanel').classList.remove('hidden');
            document.getElementById('responsePanel').classList.remove('hidden');
        }

        // Copy prompt to clipboard
        function copyPrompt() {
            const prompt = document.getElementById('promptOutput').textContent;
            navigator.clipboard.writeText(prompt).then(() => {
                showToast("📋 Prompt copied to clipboard!");
            }).catch(() => {
                showToast("❌ Failed to copy prompt", "error");
            });
        }

        // Process AI response
        function processAIResponse() {
            const response = document.getElementById('aiResponse').value.trim();
            
            if (!response) {
                showToast("⚠️ Please paste an AI response first!", "error");
                return;
            }

            // Simple processing - chunk into sections
            const sections = response.split('\n\n').filter(section => section.trim());
            
            let processedHTML = '<div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin-top: 15px;">';
            
            sections.forEach((section, index) => {
                const isHeading = section.includes('##') || section.includes('###') || section.length < 100;
                if (isHeading) {
                    processedHTML += `<h4 style="color: #4a90e2; margin: 20px 0 10px 0;">${section.replace(/#+\s*/, '')}</h4>`;
                } else {
                    processedHTML += `<div style="margin-bottom: 15px; line-height: 1.6;">${section}</div>`;
                }
            });
            
            processedHTML += '</div>';
            
            document.getElementById('processedContent').innerHTML = processedHTML;
            document.getElementById('processedResults').classList.remove('hidden');
            
            showToast("📊 Response processed successfully!");
        }

        // Mark challenge complete
        function markChallengeComplete() {
            // Update user stats
            appState.userStats.totalChallenges++;
            appState.userStats.skillPoints += getPointsForLevel(appState.selectedLevel);
            appState.userStats.currentStreak++;
            
            // Check for level up
            const newLevel = Math.floor(appState.userStats.skillPoints / 100) + 1;
            if (newLevel > appState.userStats.currentLevel) {
                appState.userStats.currentLevel = newLevel;
                showToast(`🎉 Level Up! You're now Level ${newLevel}!`, "success");
            }

            // Update objective progress
            if (appState.selectedFocus && appState.learningObjectives[appState.selectedFocus] !== undefined) {
                appState.learningObjectives[appState.selectedFocus] = Math.min(100, 
                    appState.learningObjectives[appState.selectedFocus] + getProgressIncrement(appState.selectedLevel));
            }

            saveUserStats();
            updateStatsDisplay();
            updateObjectivesDisplay();
            
            showToast("🏆 Challenge completed! Great job!", "success");
            
            // Reset form
            document.getElementById('challengeInput').value = '';
            document.getElementById('aiResponse').value = '';
            document.getElementById('analysisPanel').classList.add('hidden');
            document.getElementById('promptPanel').classList.add('hidden');
            document.getElementById('responsePanel').classList.add('hidden');
        }

        // Get points for difficulty level
        function getPointsForLevel(level) {
            const points = {
                beginner: 10,
                intermediate: 25,
                advanced: 50,
                expert: 100
            };
            return points[level] || 10;
        }

        // Get progress increment for level
        function getProgressIncrement(level) {
            const increments = {
                beginner: 5,
                intermediate: 10,
                advanced: 15,
                expert: 25
            };
            return increments[level] || 5;
        }

        // Update stats display
        function updateStatsDisplay() {
            document.getElementById('totalChallenges').textContent = appState.userStats.totalChallenges;
            document.getElementById('currentStreak').textContent = appState.userStats.currentStreak;
            document.getElementById('skillPoints').textContent = appState.userStats.skillPoints;
            document.getElementById('currentLevel').textContent = appState.userStats.currentLevel;
        }

        // Update objectives display
        function updateObjectivesDisplay() {
            const objectives = ['fundamentals', 'programming', 'engineering', 'mathematics'];
            objectives.forEach(objective => {
                const progress = appState.learningObjectives[objective];
                const element = document.querySelector(`[data-objective="${objective}"]`);
                if (element) {
                    const progressBar = element.querySelector('.progress-fill');
                    const progressText = element.querySelector('small');
                    
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `${progress}% Complete`;
                    
                    if (progress >= 100) {
                        element.classList.add('completed');
                    }
                }
            });
        }

        // Save user stats (in-memory for this demo)
        function saveUserStats() {
            // In a real app, this would save to a backend or local storage
            // For this demo, we just keep it in memory
        }

        // Load user stats
        function loadUserStats() {
            // In a real app, this would load from storage
            // For demo purposes, stats start at 0
        }

        // Show toast notification
        function showToast(message, type = "info") {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            
            if (type === "error") {
                toast.style.background = "linear-gradient(45deg, #ff6b6b, #ff8e53)";
            } else if (type === "success") {
                toast.style.background = "linear-gradient(45deg, #50c878, #96c93d)";
            }
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
