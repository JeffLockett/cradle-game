<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Detective 🚗 - Fix This Car!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #FFD700;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .level-progress {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            width: 30%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .car-visual {
            position: relative;
            max-width: 600px;
            margin: 0 auto 30px;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .car-svg {
            width: 100%;
            height: auto;
        }
        
        .car-part {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .car-part:hover {
            filter: brightness(1.3);
            transform: scale(1.05);
        }
        
        .symptom-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .symptom-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border: none;
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .symptom-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .symptom-btn.selected {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            transform: scale(1.05);
        }
        
        .diagnosis-section {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        .steps-container {
            display: grid;
            gap: 15px;
        }
        
        .step {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid #FFD700;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .step:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(10px);
        }
        
        .step-number {
            background: #FFD700;
            color: #333;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
        }
        
        .step.completed {
            background: rgba(0,255,0,0.2);
            border-left-color: #00ff00;
        }
        
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .celebration.show {
            opacity: 1;
            animation: bounce 0.6s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translate(-50%, -50%) translateY(0); }
            40% { transform: translate(-50%, -50%) translateY(-30px); }
            60% { transform: translate(-50%, -50%) translateY(-15px); }
        }
        
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1001;
        }
        
        .achievement-popup.show {
            transform: translateX(0);
        }
        
        .next-btn {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            border: none;
            color: white;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }
        
        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .reset-btn:hover {
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 2em;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .symptom-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 class="title">🚗 Car Detective Game</h1>
            <p>Level up your car knowledge! Click symptoms, earn XP, become a master!</p>
            <button class="reset-btn" onclick="resetProgress()">🔄 Reset Progress</button>
        </div>
        
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-number" id="xp">0</div>
                <div class="stat-label">XP Points</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="level">1</div>
                <div class="stat-label">Mechanic Level</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="streak">0</div>
                <div class="stat-label">Success Streak</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="solved">0</div>
                <div class="stat-label">Cars Fixed</div>
            </div>
        </div>
        
        <div class="level-progress">
            <div class="progress-fill" id="progress"></div>
        </div>
        
        <div class="car-visual">
            <svg class="car-svg" viewBox="0 0 400 200">
                <!-- Car Body -->
                <rect x="50" y="120" width="300" height="60" rx="10" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
                
                <!-- Car Roof -->
                <path d="M 80 120 L 120 80 L 280 80 L 320 120 Z" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
                
                <!-- Windows -->
                <path d="M 90 115 L 120 90 L 170 90 L 170 115 Z" fill="#3498db" stroke="#2980b9" stroke-width="2" class="car-part" data-part="windshield"/>
                <path d="M 180 115 L 180 90 L 270 90 L 300 115 Z" fill="#3498db" stroke="#2980b9" stroke-width="2" class="car-part" data-part="windows"/>
                
                <!-- Wheels -->
                <circle cx="100" cy="170" r="25" fill="#2c3e50" stroke="#34495e" stroke-width="3" class="car-part" data-part="front-wheel"/>
                <circle cx="300" cy="170" r="25" fill="#2c3e50" stroke="#34495e" stroke-width="3" class="car-part" data-part="rear-wheel"/>
                
                <!-- Headlights -->
                <circle cx="40" cy="140" r="12" fill="#f1c40f" stroke="#f39c12" stroke-width="2" class="car-part" data-part="headlights"/>
                
                <!-- Engine Area -->
                <rect x="50" y="120" width="80" height="60" rx="5" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2" class="car-part" data-part="engine" opacity="0.7"/>
                
                <!-- Exhaust -->
                <rect x="350" y="155" width="20" height="8" rx="4" fill="#34495e" class="car-part" data-part="exhaust"/>
            </svg>
        </div>
        
        <div class="symptom-buttons">
            <button class="symptom-btn" data-symptom="wont-start">🔋 Car Won't Start</button>
            <button class="symptom-btn" data-symptom="strange-noise">🔊 Strange Noises</button>
            <button class="symptom-btn" data-symptom="overheating">🌡️ Engine Overheating</button>
            <button class="symptom-btn" data-symptom="brake-issues">🛑 Brake Problems</button>
            <button class="symptom-btn" data-symptom="electrical">⚡ Electrical Issues</button>
            <button class="symptom-btn" data-symptom="vibration">📳 Car Vibrating</button>
        </div>
        
        <div class="diagnosis-section" id="diagnosis">
            <h2>🎯 Diagnosis & Action Plan</h2>
            <div class="steps-container" id="steps"></div>
            <button class="next-btn" onclick="completeTask()">✅ Mark Complete & Get XP!</button>
        </div>
    </div>
    
    <div class="celebration" id="celebration">🎉</div>
    <div class="achievement-popup" id="achievement"></div>
    
    <script>
        // DEPLOYMENT VERSION - WITH LOCALSTORAGE
        let gameState = {
            xp: parseInt(localStorage.getItem('carGameXP')) || 0,
            level: parseInt(localStorage.getItem('carGameLevel')) || 1,
            streak: parseInt(localStorage.getItem('carGameStreak')) || 0,
            solved: parseInt(localStorage.getItem('carGameSolved')) || 0,
            currentSymptom: null
        };
        
        const symptoms = {
            'wont-start': {
                title: "Car Won't Start Diagnosis",
                steps: [
                    "Check if lights/radio work (battery test)",
                    "Listen for clicking sounds when turning key",
                    "Check battery connections for corrosion",
                    "Try jump-starting the battery",
                    "Test starter motor if battery is good"
                ],
                xp: 50
            },
            'strange-noise': {
                title: "Strange Noise Investigation", 
                steps: [
                    "Identify when noise occurs (idle, driving, braking)",
                    "Locate noise source (engine, wheels, exhaust)",
                    "Check belt tension and condition",
                    "Inspect exhaust system for loose parts",
                    "Schedule professional inspection if unsure"
                ],
                xp: 40
            },
            'overheating': {
                title: "Engine Overheating Protocol",
                steps: [
                    "STOP driving immediately - pull over safely",
                    "Turn off A/C, turn on heater full blast",
                    "Check coolant level when engine cools",
                    "Look for visible leaks under the car",
                    "Check radiator fan operation"
                ],
                xp: 60
            },
            'brake-issues': {
                title: "Brake System Check",
                steps: [
                    "Test brake pedal feel (spongy vs firm)",
                    "Listen for squealing or grinding sounds",
                    "Check brake fluid level and color",
                    "Inspect brake pads through wheel spokes",
                    "Get professional inspection ASAP"
                ],
                xp: 70
            },
            'electrical': {
                title: "Electrical Troubleshooting",
                steps: [
                    "Check all fuses in fuse box",
                    "Test battery voltage (should be 12.6V+)",
                    "Clean battery terminals",
                    "Check alternator belt condition",
                    "Test individual electrical components"
                ],
                xp: 55
            },
            'vibration': {
                title: "Vibration Diagnosis",
                steps: [
                    "Note when vibration occurs (idle, highway, braking)",
                    "Check tire pressure and wear patterns",
                    "Inspect wheels for balance weights",
                    "Check engine mounts for wear",
                    "Schedule wheel balance/alignment check"
                ],
                xp: 45
            }
        };
        
        function updateDisplay() {
            document.getElementById('xp').textContent = gameState.xp;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('solved').textContent = gameState.solved;
            
            // Update progress bar
            const progressPercent = ((gameState.xp % 100) / 100) * 100;
            document.getElementById('progress').style.width = progressPercent + '%';
            
            // Check for level up
            const newLevel = Math.floor(gameState.xp / 100) + 1;
            if (newLevel > gameState.level) {
                gameState.level = newLevel;
                showAchievement(`🎊 LEVEL UP! You're now Level ${gameState.level}!`);
                celebrate('🆙');
            }
        }
        
        function saveProgress() {
            localStorage.setItem('carGameXP', gameState.xp);
            localStorage.setItem('carGameLevel', gameState.level);
            localStorage.setItem('carGameStreak', gameState.streak);
            localStorage.setItem('carGameSolved', gameState.solved);
        }
        
        function resetProgress() {
            if (confirm('Reset all progress? This cannot be undone!')) {
                localStorage.clear();
                gameState = { xp: 0, level: 1, streak: 0, solved: 0, currentSymptom: null };
                updateDisplay();
                celebrate('🔄');
                showAchievement('Progress reset! Time for a fresh start!');
            }
        }
        
        function selectSymptom(symptom) {
            gameState.currentSymptom = symptom;
            
            // Update button states
            document.querySelectorAll('.symptom-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Show diagnosis
            const diagnosisData = symptoms[symptom];
            const stepsContainer = document.getElementById('steps');
            stepsContainer.innerHTML = '';
            
            diagnosisData.steps.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'step';
                stepDiv.innerHTML = `
                    <div class="step-number">${index + 1}</div>
                    <div>${step}</div>
                `;
                stepDiv.onclick = () => toggleStep(stepDiv);
                stepsContainer.appendChild(stepDiv);
            });
            
            document.getElementById('diagnosis').style.display = 'block';
            document.getElementById('diagnosis').scrollIntoView({ behavior: 'smooth' });
        }
        
        function toggleStep(stepDiv) {
            stepDiv.classList.toggle('completed');
            celebrate('✅');
        }
        
        function completeTask() {
            if (!gameState.currentSymptom) return;
            
            const symptomData = symptoms[gameState.currentSymptom];
            gameState.xp += symptomData.xp;
            gameState.solved++;
            gameState.streak++;
            
            celebrate('🎉');
            showAchievement(`+${symptomData.xp} XP! Great troubleshooting!`);
            
            updateDisplay();
            saveProgress();
            
            // Reset for next problem
            setTimeout(() => {
                document.getElementById('diagnosis').style.display = 'none';
                document.querySelectorAll('.symptom-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                gameState.currentSymptom = null;
            }, 2000);
        }
        
        function celebrate(emoji) {
            const celebration = document.getElementById('celebration');
            celebration.textContent = emoji;
            celebration.classList.add('show');
            setTimeout(() => {
                celebration.classList.remove('show');
            }, 600);
        }
        
        function showAchievement(message) {
            const achievement = document.getElementById('achievement');
            achievement.textContent = message;
            achievement.classList.add('show');
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }
        
        // Event listeners
        document.querySelectorAll('.symptom-btn').forEach(btn => {
            btn.addEventListener('click', (e) => selectSymptom(e.target.dataset.symptom));
        });
        
        // Car part interactions
        document.querySelectorAll('.car-part').forEach(part => {
            part.addEventListener('click', () => {
                celebrate('🔧');
                showAchievement(`Good eye! You clicked the ${part.dataset.part}!`);
            });
        });
        
        // Initialize display
        updateDisplay();
    </script>
</body>
</html>
