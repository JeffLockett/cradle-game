// Initialize AI Bridge when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            window.hexMindBridge = new HexMindAIBridge();
            
            // ðŸ¤– PHASE 3: REAL AI INTEGRATION ENGINE - INSERT HERE
            
            // Replace simulateAIResponse method
            HexMindAIBridge.prototype.simulateAIResponse = async function(mission, prompt) {
                this.showProcessingState(mission);
                try {
                    const realAIResponse = await this.processWithRealAI(mission, prompt);
                    if (realAIResponse) {
                        const learningSeed = this.parseAIResponse(realAIResponse, mission);
                        this.displayLearningSeed(learningSeed);
                    } else {
                        const learningSeed = this.generateEnhancedLearningSeed(mission);
                        this.displayLearningSeed(learningSeed);
                    }
                } catch (error) {
                    console.log('ðŸ”„ Using enhanced simulation mode:', error.message);
                    const learningSeed = this.generateEnhancedLearningSeed(mission);
                    this.displayLearningSeed(learningSeed);
                }
            };

            // Enhanced content generation
            HexMindAIBridge.prototype.generateEnhancedLearningSeed = function(mission) {
                const seed = {
                    mission_id: mission.id,
                    title: `${mission.sector} Learning Seed: ${this.extractTopicFromChallenge(mission.challenge)}`,
                    difficulty: mission.difficulty,
                    xp_value: mission.xpPotential,
                    modules: [
                        {
                            type: "concept_introduction",
                            content: this.generateEnhancedIntroduction(mission),
                            understanding_check: this.generateContextualQuestion(mission, 'introduction')
                        },
                        {
                            type: "core_knowledge",
                            content: this.generateEnhancedCoreContent(mission),
                            understanding_check: this.generateContextualQuestion(mission, 'core')
                        },
                        {
                            type: "practical_application", 
                            content: this.generateEnhancedPracticalContent(mission),
                            understanding_check: this.generateContextualQuestion(mission, 'application')
                        }
                    ],
                    next_steps: this.generatePersonalizedNextSteps(mission),
                    neural_pattern: {
                        retention_hooks: this.identifyRetentionHooks(mission),
                        integration_points: [mission.sector.toLowerCase(), 'real_world_application'],
                        difficulty_progression: mission.difficulty,
                        brain_ready: true,
                        challenge_context: mission.challenge
                    }
                };
                this.learningSeeds.push(seed);
                return seed;
            };

            // Topic extraction
            HexMindAIBridge.prototype.extractTopicFromChallenge = function(challenge) {
                const words = challenge.toLowerCase().split(' ');
                const stopWords = ['i', 'want', 'to', 'understand', 'how', 'what', 'why', 'when', 'where', 'learn', 'about'];
                const meaningfulWords = words.filter(word => !stopWords.includes(word) && word.length > 2);
                return meaningfulWords.slice(0, 3).join(' ') || 'STEM Concept';
            };

            // Enhanced introduction
            HexMindAIBridge.prototype.generateEnhancedIntroduction = function(mission) {
                const topic = this.extractTopicFromChallenge(mission.challenge);
                const intros = {
                    'Science': `Let's explore ${topic} through scientific discovery! This ${mission.difficulty.toLowerCase()}-level challenge connects to fundamental principles that govern our universe.`,
                    'Technology': `Welcome to ${topic}! This ${mission.difficulty.toLowerCase()}-level technology challenge will help you understand how digital systems work.`,
                    'Engineering': `Time to engineer solutions for ${topic}! This ${mission.difficulty.toLowerCase()}-level challenge teaches engineering thinking.`,
                    'Mathematics': `Let's unlock the mathematical patterns behind ${topic}! This ${mission.difficulty.toLowerCase()}-level exploration reveals mathematical structures.`
                };
                return intros[mission.sector] || intros['Science'];
            };

            // Enhanced core content
            HexMindAIBridge.prototype.generateEnhancedCoreContent = function(mission) {
                const topic = this.extractTopicFromChallenge(mission.challenge);
                return `The science behind ${topic} involves interconnected systems. Key principles include: (1) Observable phenomena following natural laws, (2) Measurable cause-and-effect relationships, (3) Energy transformations driving processes, and (4) Repeating patterns across scales. Think of it as a well-orchestrated system where each component contributes to the whole.`;
            };

            // Enhanced practical content
            HexMindAIBridge.prototype.generateEnhancedPracticalContent = function(mission) {
                const topic = this.extractTopicFromChallenge(mission.challenge);
                return `Apply your understanding of ${topic} through hands-on investigation: Make detailed observations, form testable hypotheses, design simple experiments, record data systematically, and compare results with established knowledge. This mirrors how real scientists build understanding.`;
            };

            // Contextual questions
            HexMindAIBridge.prototype.generateContextualQuestion = function(mission, stage) {
                const topic = this.extractTopicFromChallenge(mission.challenge);
                const questions = {
                    'introduction': `How does understanding ${topic} change how you observe the world?`,
                    'core': `Can you explain the key principles behind ${topic} using your own examples?`,
                    'application': `Design an experiment to test your understanding of ${topic}. What would you measure?`
                };
                return questions[stage] || questions['introduction'];
            };

            // Personalized next steps
            HexMindAIBridge.prototype.generatePersonalizedNextSteps = function(mission) {
                return [
                    `Explore advanced ${mission.sector.toLowerCase()} concepts related to your challenge`,
                    `Find real-world applications in current research or industry`,
                    `Connect with others learning similar topics`,
                    `Create a project demonstrating your understanding`,
                    `Join relevant competitions or contribute to open science`
                ];
            };

            // Retention hooks
            HexMindAIBridge.prototype.identifyRetentionHooks = function(mission) {
                const hooks = ['conceptual', 'practical'];
                if (mission.challenge.includes('visual') || mission.challenge.includes('see')) hooks.push('visual');
                if (mission.challenge.includes('build') || mission.challenge.includes('create')) hooks.push('kinesthetic');
                return hooks;
            };

            console.log('ðŸ¤– Phase 3: Enhanced AI Integration - LOADED');
            
            console.log('ðŸš€ HexMind AI Bridge Engine - ONLINE');
        });
