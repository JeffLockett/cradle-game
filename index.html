.export-format {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            border: 1px solid #444;
            font-size: clamp(10px, 1.5vw, 12px);
            overflow-x: auto;
        }<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexMind Orchestrator - Task Tracker</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 10px;
            margin: 0;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        h1 {
            color: #4fc3f7;
            text-align: center;
            margin-bottom: 20px;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
        }
        
        .command-input {
            width: 100%;
            padding: 15px;
            font-size: clamp(14px, 2.5vw, 18px);
            background: #2a2a2a;
            border: 2px solid #4fc3f7;
            color: #fff;
            border-radius: 8px;
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        button {
            flex: 1;
            min-width: 120px;
            padding: 12px 15px;
            background: #4fc3f7;
            color: #000;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: clamp(12px, 2vw, 14px);
            transition: all 0.3s;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        button:hover {
            background: #29b6f6;
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 0 20px;
            }
            
            body {
                padding: 20px;
            }
            
            .grid-container {
                grid-template-columns: 1fr 1fr;
            }
            
            button {
                flex: 0 1 auto;
                min-width: 160px;
            }
        }
        
        .section {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #444;
        }
        
        .section h2 {
            color: #4fc3f7;
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: clamp(1.1rem, 3vw, 1.5rem);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: clamp(12px, 2vw, 14px);
        }
        
        th, td {
            padding: 8px 4px;
            text-align: left;
            border-bottom: 1px solid #444;
            word-wrap: break-word;
        }
        
        @media (min-width: 480px) {
            th, td {
                padding: 10px 8px;
            }
        }
        
        th {
            background: #333;
            color: #4fc3f7;
            font-size: clamp(11px, 2vw, 13px);
        }
        
        .status {
            cursor: pointer;
            font-size: clamp(16px, 3vw, 20px);
            user-select: none;
            display: inline-block;
            min-width: 24px;
            text-align: center;
        }
        
        .checkbox {
            width: clamp(16px, 3vw, 20px);
            height: clamp(16px, 3vw, 20px);
            cursor: pointer;
        }
        
        .task-input {
            width: 100%;
            min-width: 0;
            padding: 4px 6px;
            background: #1a1a1a;
            border: 1px solid #444;
            color: #e0e0e0;
            border-radius: 3px;
            font-size: clamp(11px, 2vw, 14px);
        }
        
        @media (min-width: 480px) {
            .task-input {
                padding: 5px 8px;
            }
        }
        
        #aiTable td:nth-child(2) {
            min-width: 0;
            max-width: 0;
            width: 45%;
        }
        
        #aiTable td:nth-child(1) {
            width: 15%;
            min-width: 60px;
        }
        
        #aiTable td:nth-child(3), 
        #aiTable td:nth-child(4) {
            width: 10%;
            text-align: center;
        }
        
        @media (max-width: 479px) {
            #aiTable td:nth-child(2) {
                width: 50%;
            }
            
            #aiTable td:nth-child(1) {
                width: 20%;
            }
            
            #aiTable td:nth-child(3), 
            #aiTable td:nth-child(4) {
                width: 15%;
            }
        }
        .progress-bar {
            width: 100%;
            height: clamp(25px, 4vw, 35px);
            background: #333;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4fc3f7, #29b6f6);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: bold;
            font-size: clamp(12px, 2.5vw, 16px);
        }
        
        .synthesis-box {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #444;
            min-height: 150px;
        }
        
        .synthesis-textarea {
            width: 100%;
            min-height: clamp(120px, 20vh, 200px);
            background: #1a1a1a;
            border: 1px solid #444;
            color: #e0e0e0;
            padding: 10px;
            border-radius: 5px;
            resize: vertical;
            font-size: clamp(12px, 2vw, 14px);
            box-sizing: border-box;
        }
        
        .shortcut-hint {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: #333;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #4fc3f7;
            font-size: clamp(10px, 1.5vw, 12px);
            max-width: 200px;
            z-index: 1000;
        }
        
        @media (max-width: 767px) {
            .shortcut-hint {
                display: none;
            }
        }
        
        .shortcut-hint h3 {
            margin: 0 0 8px 0;
            color: #4fc3f7;
            font-size: clamp(11px, 1.8vw, 14px);
        }
        
        .shortcut-hint div {
            margin-bottom: 4px;
        }
        
        .add-task-btn {
            margin-top: 10px;
            width: 100%;
            max-width: 200px;
        }
        
        @media (max-width: 479px) {
            .section {
                padding: 10px;
            }
            
            .synthesis-box {
                padding: 10px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                min-width: 100%;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ HexMind Task Orchestrator</h1>
        
        <input type="text" class="command-input" id="commandInput" 
               placeholder="Enter orchestration command (e.g., 'Build complete attention system with nudges')"
               value="Build complete attention system with nudges">
        
        <div class="button-group">
            <button onclick="parseCommand()" title="Break down your command into AI tasks">
                üéØ Break Down Command
            </button>
            <button onclick="clearAll()" title="Reset all tasks and progress">
                üóëÔ∏è Clear Everything
            </button>
            <button onclick="exportMarkdown()" title="Export progress as markdown report">
                üìã Export Report
            </button>
            <button onclick="copyDelegation()" title="Copy task assignments to clipboard">
                üìù Copy Tasks
            </button>
        </div>
        
        <div class="grid-container">
            <div class="section">
                <h2>ü§ñ AI Mind Hive - Specialized Delegation</h2>
                <div style="font-size: 12px; color: #888; margin-bottom: 15px;">
                    Each AI focuses on their top 2 abilities + consensus validation areas
                </div>
                <table id="aiTable">
                    <thead>
                        <tr>
                            <th>AI Specialist</th>
                            <th>Primary | Secondary | Consensus Tasks</th>
                            <th>Status</th>
                            <th>Done</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ai="Claude">
                            <td><strong>Claude</strong><br><small>Architecture & Analysis</small></td>
                            <td><input type="text" class="task-input" id="claude-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                        <tr data-ai="Grok">
                            <td><strong>Grok</strong><br><small>Performance & Real-time</small></td>
                            <td><input type="text" class="task-input" id="grok-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                        <tr data-ai="Gemini">
                            <td><strong>Gemini</strong><br><small>UX & Multi-modal</small></td>
                            <td><input type="text" class="task-input" id="gemini-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                        <tr data-ai="Perplexity">
                            <td><strong>Perplexity</strong><br><small>Research & Intelligence</small></td>
                            <td><input type="text" class="task-input" id="perplexity-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                        <tr data-ai="Copilot">
                            <td><strong>Copilot</strong><br><small>Code & Dev Experience</small></td>
                            <td><input type="text" class="task-input" id="copilot-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                        <tr data-ai="SuperGrok">
                            <td><strong>SuperGrok</strong><br><small>Security & Integration</small></td>
                            <td><input type="text" class="task-input" id="supergrok-task"></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="checkbox" class="checkbox" onchange="updateProgress()"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section">
                <h2>üßë Meatbag Tasks</h2>
                <table id="meatbagTable">
                    <thead>
                        <tr>
                            <th>Task</th>
                            <th>Status</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody id="meatbagTasks">
                        <tr>
                            <td><input type="text" class="task-input" placeholder="Human task..."></td>
                            <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                            <td><input type="text" class="task-input" placeholder="Notes..."></td>
                        </tr>
                    </tbody>
                </table>
                <button onclick="addMeatbagTask()" class="add-task-btn" title="Add another human task">
                    ‚ûï Add Human Task
                </button>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar" style="width: 0%">
                0/6 Complete
            </div>
        </div>
        
        <div class="synthesis-box">
            <h2>üìã Consensus Synthesis Hub</h2>
            <div style="font-size: 12px; color: #888; margin-bottom: 10px;">
                Compare overlapping responses to build consensus and identify the strongest solutions
            </div>
            <textarea class="synthesis-textarea" id="synthesisNotes" 
                      placeholder="üîç CONSENSUS VALIDATION NEEDED:

Compare responses from AIs working on overlapping areas...

üìã SYNTHESIS CHECKLIST:
‚ñ° Do all AIs agree on core approach?
‚ñ° Are there conflicting recommendations?
‚ñ° Which AI provided the most detailed solution?
‚ñ° Are there gaps that need additional research?
‚ñ° Can solutions be combined for better results?

üí° Paste AI responses below for comparison..."></textarea>
        </div>
        
        <div class="export-format" id="exportPreview" style="display: none;">
            <!-- Markdown export preview will appear here -->
        </div>
    </div>
    
    <div class="shortcut-hint">
        <h3>‚å®Ô∏è Shortcuts</h3>
        <div>Alt+P - Parse Command</div>
        <div>Alt+D - Copy Delegation</div>
        <div>Alt+E - Export Markdown</div>
        <div>Alt+C - Clear All</div>
        <div>Alt+1-6 - Toggle AI Status</div>
        <div>Ctrl+1-6 - Check AI Response</div>
    </div>
    
    <script>
        // AI Specialization Matrix - Each AI's top 2 abilities
        const aiSpecializations = {
            'Claude': {
                primary: 'System Architecture & Logic',
                secondary: 'Complex Problem Analysis',
                strengths: ['design patterns', 'logical reasoning', 'system thinking', 'documentation'],
                overlap_areas: ['user experience', 'data analysis', 'strategic planning']
            },
            'Grok': {
                primary: 'Performance Optimization',
                secondary: 'Real-time Systems',
                strengths: ['speed optimization', 'resource management', 'live data', 'efficiency'],
                overlap_areas: ['technical implementation', 'system monitoring', 'data processing']
            },
            'Gemini': {
                primary: 'Creative Content & UX',
                secondary: 'Multi-modal Integration',
                strengths: ['visual design', 'user psychology', 'content creation', 'accessibility'],
                overlap_areas: ['user research', 'interaction design', 'behavioral analysis']
            },
            'Perplexity': {
                primary: 'Research & Data Analysis',
                secondary: 'Market Intelligence',
                strengths: ['fact-finding', 'trend analysis', 'competitive research', 'validation'],
                overlap_areas: ['user needs', 'best practices', 'industry standards']
            },
            'Copilot': {
                primary: 'Code Implementation',
                secondary: 'Developer Experience',
                strengths: ['rapid prototyping', 'code generation', 'debugging', 'integration'],
                overlap_areas: ['technical feasibility', 'implementation strategy', 'testing']
            },
            'SuperGrok': {
                primary: 'Security & Risk Assessment',
                secondary: 'System Integration',
                strengths: ['vulnerability analysis', 'privacy protection', 'compliance', 'scalability'],
                overlap_areas: ['architecture review', 'performance impact', 'user safety']
            }
        };

        // Consensus research areas for cross-validation
        const consensusAreas = {
            'user_experience': ['Claude', 'Gemini', 'Perplexity'],
            'performance': ['Grok', 'Copilot', 'SuperGrok'],
            'implementation': ['Claude', 'Copilot', 'SuperGrok'],
            'research_validation': ['Perplexity', 'Gemini', 'Claude'],
            'technical_feasibility': ['Grok', 'Copilot', 'Claude'],
            'security_privacy': ['SuperGrok', 'Claude', 'Perplexity']
        };
        
        function parseCommand() {
            const command = document.getElementById('commandInput').value;
            const commandLower = command.toLowerCase();
            
            // Clear existing tasks first
            document.querySelectorAll('.task-input').forEach(input => {
                if (input.id.includes('-task')) {
                    input.value = '';
                }
            });
            
            // Extract project context and requirements
            const projectContext = analyzeProject(command);
            const consensusNeeded = identifyConsensusAreas(projectContext);
            
            // Generate specialized tasks based on each AI's top abilities
            const tasks = generateSpecializedTasks(projectContext, consensusNeeded);
            
            // Fill in the task assignments
            fillTasks(tasks);
            
            // Reset all statuses and checkboxes for new command
            document.querySelectorAll('.status').forEach(status => status.textContent = '‚è≥');
            document.querySelectorAll('.checkbox').forEach(cb => cb.checked = false);
            updateProgress();
            
            // Show consensus areas in synthesis notes
            updateSynthesisGuidance(consensusNeeded);
        }
        
        function analyzeProject(command) {
            const commandLower = command.toLowerCase();
            
            return {
                type: getProjectType(commandLower),
                complexity: getComplexity(commandLower),
                userFocus: getUserFocus(commandLower),
                techRequirements: getTechRequirements(commandLower),
                businessNeeds: getBusinessNeeds(commandLower),
                riskFactors: getRiskFactors(commandLower)
            };
        }
        
        function getProjectType(cmd) {
            if (cmd.includes('calendar') || cmd.includes('scheduling')) return 'productivity_app';
            if (cmd.includes('game') || cmd.includes('interactive')) return 'interactive_experience';
            if (cmd.includes('dashboard') || cmd.includes('analytics')) return 'data_visualization';
            if (cmd.includes('api') || cmd.includes('backend')) return 'backend_system';
            if (cmd.includes('mobile') || cmd.includes('app')) return 'mobile_application';
            if (cmd.includes('website') || cmd.includes('landing')) return 'web_presence';
            return 'general_software';
        }
        
        function getComplexity(cmd) {
            const complexityMarkers = ['enterprise', 'scalable', 'complex', 'advanced', 'sophisticated'];
            const simpleMarkers = ['simple', 'basic', 'quick', 'minimal', 'prototype'];
            
            if (complexityMarkers.some(marker => cmd.includes(marker))) return 'high';
            if (simpleMarkers.some(marker => cmd.includes(marker))) return 'low';
            return 'medium';
        }
        
        function getUserFocus(cmd) {
            const focuses = [];
            if (cmd.includes('adhd') || cmd.includes('accessibility')) focuses.push('accessibility');
            if (cmd.includes('mobile') || cmd.includes('touch')) focuses.push('mobile');
            if (cmd.includes('speed') || cmd.includes('fast')) focuses.push('performance');
            if (cmd.includes('beautiful') || cmd.includes('design')) focuses.push('aesthetics');
            if (cmd.includes('secure') || cmd.includes('privacy')) focuses.push('security');
            return focuses.length > 0 ? focuses : ['general_usability'];
        }
        
        function getTechRequirements(cmd) {
            const tech = [];
            if (cmd.includes('real-time') || cmd.includes('live')) tech.push('real_time');
            if (cmd.includes('database') || cmd.includes('data')) tech.push('data_storage');
            if (cmd.includes('ai') || cmd.includes('ml')) tech.push('machine_learning');
            if (cmd.includes('api') || cmd.includes('integration')) tech.push('api_integration');
            if (cmd.includes('responsive') || cmd.includes('mobile')) tech.push('responsive_design');
            return tech;
        }
        
        function getBusinessNeeds(cmd) {
            const needs = [];
            if (cmd.includes('monetize') || cmd.includes('revenue')) needs.push('monetization');
            if (cmd.includes('scale') || cmd.includes('growth')) needs.push('scalability');
            if (cmd.includes('market') || cmd.includes('competitive')) needs.push('market_analysis');
            if (cmd.includes('user') || cmd.includes('customer')) needs.push('user_acquisition');
            return needs;
        }
        
        function getRiskFactors(cmd) {
            const risks = [];
            if (cmd.includes('personal') || cmd.includes('private')) risks.push('privacy');
            if (cmd.includes('payment') || cmd.includes('financial')) risks.push('financial');
            if (cmd.includes('health') || cmd.includes('medical')) risks.push('compliance');
            if (cmd.includes('enterprise') || cmd.includes('business')) risks.push('reliability');
            return risks;
        }
        
        function identifyConsensusAreas(context) {
            const needed = [];
            
            // Always need UX consensus for user-facing projects
            if (context.userFocus.includes('accessibility') || context.userFocus.includes('mobile')) {
                needed.push('user_experience');
            }
            
            // Performance consensus for complex or real-time systems
            if (context.complexity === 'high' || context.techRequirements.includes('real_time')) {
                needed.push('performance');
            }
            
            // Implementation consensus for technical projects
            if (context.techRequirements.length > 2) {
                needed.push('implementation');
            }
            
            // Research validation for business-focused projects
            if (context.businessNeeds.length > 0) {
                needed.push('research_validation');
            }
            
            // Security consensus for risky projects
            if (context.riskFactors.length > 0) {
                needed.push('security_privacy');
            }
            
            // Technical feasibility for complex projects
            if (context.complexity === 'high') {
                needed.push('technical_feasibility');
            }
            
            return needed;
        }
        
        function generateSpecializedTasks(context, consensusAreas) {
            const tasks = {};
            
            // Generate primary and secondary tasks for each AI based on their specializations
            Object.keys(aiSpecializations).forEach(ai => {
                const spec = aiSpecializations[ai];
                tasks[ai] = generateAITask(ai, spec, context, consensusAreas);
            });
            
            return tasks;
        }
        
        function generateAITask(ai, specialization, context, consensusAreas) {
            const primaryTask = generatePrimaryTask(ai, specialization.primary, context);
            const secondaryTask = generateSecondaryTask(ai, specialization.secondary, context);
            const consensusTask = generateConsensusTask(ai, consensusAreas);
            
            // Combine into a comprehensive task
            let fullTask = `PRIMARY: ${primaryTask}`;
            if (secondaryTask) {
                fullTask += ` | SECONDARY: ${secondaryTask}`;
            }
            if (consensusTask) {
                fullTask += ` | CONSENSUS: ${consensusTask}`;
            }
            
            return fullTask;
        }
        
        function generatePrimaryTask(ai, primaryAbility, context) {
            const subject = extractMainSubject(document.getElementById('commandInput').value);
            
            switch (ai) {
                case 'Claude':
                    return `Design the complete system architecture for ${subject}, focusing on logical flow and component relationships`;
                case 'Grok':
                    return `Optimize performance bottlenecks and resource usage for ${subject}, ensure sub-200ms response times`;
                case 'Gemini':
                    return `Create engaging UX/UI design for ${subject}, focusing on user psychology and visual hierarchy`;
                case 'Perplexity':
                    return `Research industry best practices and user needs for ${subject}, validate market assumptions`;
                case 'Copilot':
                    return `Implement core functionality for ${subject}, provide working code examples and integration patterns`;
                case 'SuperGrok':
                    return `Assess security vulnerabilities and privacy risks for ${subject}, define protection strategies`;
                default:
                    return `Apply ${primaryAbility} expertise to ${subject}`;
            }
        }
        
        function generateSecondaryTask(ai, secondaryAbility, context) {
            const subject = extractMainSubject(document.getElementById('commandInput').value);
            
            switch (ai) {
                case 'Claude':
                    return `Analyze complex edge cases and failure scenarios`;
                case 'Grok':
                    return `Design real-time monitoring and alerting systems`;
                case 'Gemini':
                    return `Integrate multi-modal interactions (voice, touch, visual)`;
                case 'Perplexity':
                    return `Provide competitive analysis and market positioning`;
                case 'Copilot':
                    return `Enhance developer experience with clear documentation`;
                case 'SuperGrok':
                    return `Plan system integration and scalability concerns`;
                default:
                    return `Apply ${secondaryAbility} to enhance solution`;
            }
        }
        
        function generateConsensusTask(ai, consensusAreas) {
            const aiConsensusRoles = [];
            
            consensusAreas.forEach(area => {
                if (consensusAreas[area] && consensusAreas[area].includes(ai)) {
                    switch (area) {
                        case 'user_experience':
                            aiConsensusRoles.push('Validate UX decisions');
                            break;
                        case 'performance':
                            aiConsensusRoles.push('Cross-check performance claims');
                            break;
                        case 'implementation':
                            aiConsensusRoles.push('Verify technical feasibility');
                            break;
                        case 'research_validation':
                            aiConsensusRoles.push('Fact-check research findings');
                            break;
                        case 'security_privacy':
                            aiConsensusRoles.push('Review security implications');
                            break;
                        case 'technical_feasibility':
                            aiConsensusRoles.push('Validate technical approach');
                            break;
                    }
                }
            });
            
            return aiConsensusRoles.join(', ');
        }
        
        function updateSynthesisGuidance(consensusAreas) {
            const textarea = document.getElementById('synthesisNotes');
            let guidance = 'üîç CONSENSUS VALIDATION NEEDED:\n\n';
            
            consensusAreas.forEach(area => {
                const ais = consensusAreas[area] || [];
                guidance += `${area.toUpperCase().replace('_', ' ')}: Compare responses from ${ais.join(', ')}\n`;
            });
            
            guidance += '\nüìã SYNTHESIS CHECKLIST:\n';
            guidance += '‚ñ° Do all AIs agree on core approach?\n';
            guidance += '‚ñ° Are there conflicting recommendations?\n';
            guidance += '‚ñ° Which AI provided the most detailed solution?\n';
            guidance += '‚ñ° Are there gaps that need additional research?\n';
            guidance += '‚ñ° Can solutions be combined for better results?\n\n';
            guidance += 'üí° Paste AI responses below for comparison...';
            
            textarea.placeholder = guidance;
        }
        
        function extractMainSubject(command) {
            // Remove common words and extract the core subject
            const commonWords = ['build', 'create', 'make', 'design', 'implement', 'a', 'an', 'the', 'with'];
            const words = command.toLowerCase().split(' ');
            const filtered = words.filter(word => !commonWords.includes(word));
            
            // Try to identify the main thing being built
            if (command.toLowerCase().includes('calendar')) return 'ADHD-friendly calendar app';
            if (command.toLowerCase().includes('system')) return 'system as described';
            if (command.toLowerCase().includes('app')) return 'application';
            
            // Return first 3-4 meaningful words
            return filtered.slice(0, 4).join(' ') || command;
        }
        
        function extractRequirements(command) {
            // Extract specific requirements mentioned
            const requirements = [];
            
            if (command.toLowerCase().includes('adhd')) requirements.push('ADHD optimization');
            if (command.toLowerCase().includes('nudge')) requirements.push('nudge system');
            if (command.toLowerCase().includes('friendly')) requirements.push('user-friendly design');
            if (command.toLowerCase().includes('not') || command.toLowerCase().includes("don't")) {
                const notMatch = command.match(/(?:not|don't)\s+(?:like\s+)?(\w+)/i);
                if (notMatch) requirements.push(`avoiding ${notMatch[1]} patterns`);
            }
            
            return requirements.join(', ');
        }
        
        function fillTasks(template) {
            for (const [ai, task] of Object.entries(template)) {
                const input = document.getElementById(`${ai.toLowerCase()}-task`);
                if (input) {
                    input.value = task;
                }
            }
        }
        
        function toggleStatus(element) {
            element.textContent = element.textContent === '‚è≥' ? '‚úÖ' : '‚è≥';
            updateProgress();
        }
        
        function updateProgress() {
            const checkboxes = document.querySelectorAll('#aiTable .checkbox');
            const checked = document.querySelectorAll('#aiTable .checkbox:checked').length;
            const total = checkboxes.length;
            const percentage = (checked / total) * 100;
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = `${checked}/${total} Complete`;
        }
        
        function clearAll() {
            if (confirm('Clear all tasks and progress?')) {
                document.getElementById('commandInput').value = '';
                document.querySelectorAll('.task-input').forEach(input => input.value = '');
                document.querySelectorAll('.status').forEach(status => status.textContent = '‚è≥');
                document.querySelectorAll('.checkbox').forEach(cb => cb.checked = false);
                document.getElementById('synthesisNotes').value = '';
                updateProgress();
            }
        }
        
        function copyDelegation() {
            const command = document.getElementById('commandInput').value;
            let delegation = `ORCHESTRATION COMMAND: ${command}\n\n`;
            
            document.querySelectorAll('#aiTable tbody tr').forEach(row => {
                const ai = row.dataset.ai;
                const task = row.querySelector('.task-input').value;
                if (task) {
                    delegation += `${ai}: ${task}\n`;
                }
            });
            
            navigator.clipboard.writeText(delegation);
            showNotification('Delegation copied to clipboard!');
        }
        
        function exportMarkdown() {
            const command = document.getElementById('commandInput').value;
            const date = new Date().toLocaleDateString();
            
            let markdown = `# ORCHESTRATION COMMAND: ${command}\n`;
            markdown += `Date: ${date}\n`;
            markdown += `Total Expected Responses: 6\n\n`;
            
            markdown += `## üéØ DELEGATION MATRIX\n`;
            markdown += `| AI | Task | Status | Response |\n`;
            markdown += `|---|---|---|---|\n`;
            
            document.querySelectorAll('#aiTable tbody tr').forEach(row => {
                const ai = row.dataset.ai;
                const task = row.querySelector('.task-input').value || '[No task]';
                const status = row.querySelector('.status').textContent;
                const response = row.querySelector('.checkbox').checked ? '[‚úì]' : '[ ]';
                markdown += `| ${ai} | ${task} | ${status} | ${response} |\n`;
            });
            
            markdown += `\n## üßë MEATBAG TASKS\n`;
            markdown += `| Task | Status | Notes |\n`;
            markdown += `|---|---|---|\n`;
            
            document.querySelectorAll('#meatbagTasks tr').forEach(row => {
                const task = row.querySelectorAll('.task-input')[0]?.value || '';
                const status = row.querySelector('.status')?.textContent || '‚è≥';
                const notes = row.querySelectorAll('.task-input')[1]?.value || '';
                if (task) {
                    markdown += `| ${task} | ${status} | ${notes} |\n`;
                }
            });
            
            const synthesis = document.getElementById('synthesisNotes').value;
            if (synthesis) {
                markdown += `\n## üìã SYNTHESIS NOTES\n${synthesis}\n`;
            }
            
            // Show preview
            document.getElementById('exportPreview').style.display = 'block';
            document.getElementById('exportPreview').textContent = markdown;
            
            // Copy to clipboard
            navigator.clipboard.writeText(markdown);
            showNotification('Markdown exported and copied!');
        }
        
        function addMeatbagTask() {
            const tbody = document.getElementById('meatbagTasks');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" class="task-input" placeholder="Human task..."></td>
                <td><span class="status" onclick="toggleStatus(this)">‚è≥</span></td>
                <td><input type="text" class="task-input" placeholder="Notes..."></td>
            `;
            tbody.appendChild(newRow);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4fc3f7;
                color: #000;
                padding: 15px 25px;
                border-radius: 5px;
                font-weight: bold;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.altKey) {
                switch(e.key) {
                    case 'p': parseCommand(); break;
                    case 'd': copyDelegation(); break;
                    case 'e': exportMarkdown(); break;
                    case 'c': clearAll(); break;
                    case '1': case '2': case '3': case '4': case '5': case '6':
                        const aiIndex = parseInt(e.key) - 1;
                        const statusEl = document.querySelectorAll('#aiTable .status')[aiIndex];
                        if (statusEl) toggleStatus(statusEl);
                        break;
                }
            }
            
            if (e.ctrlKey && e.key >= '1' && e.key <= '6') {
                const aiIndex = parseInt(e.key) - 1;
                const checkbox = document.querySelectorAll('#aiTable .checkbox')[aiIndex];
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                    updateProgress();
                }
            }
        });
        
        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize
        updateProgress();
    </script>
</body>
</html>
